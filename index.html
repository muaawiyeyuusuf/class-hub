<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Portal - Login</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom styles to match existing site */
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gradient-start: #3498db;
            --gradient-end: #2c3e50;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, var(--gradient-start), var(--gradient-end));
            background-size: 200% 200%;
            animation: gradientAnimation 10s ease infinite;
        }
        
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .card {
            transition: all 0.3s ease;
            box-shadow: var(--shadow);
        }
        
        .btn-primary {
            background: var(--primary);
            transition: var(--transition);
        }
        
        .btn-primary:hover {
            background: var(--secondary);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            opacity: 0;
            transition: opacity 0.5s ease;
            z-index: 1000;
        }
        
        .toast.show {
            opacity: 1;
        }
        
        /* Animation for form transitions */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* Mobile menu animation */
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .mobile-menu {
            animation: slideIn 0.3s ease forwards;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Toast notification -->
    <div id="toast" class="toast p-4 bg-green-600 text-white rounded-lg shadow-lg">
        <span id="toast-message"></span>
    </div>

    <!-- Header/Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="logr.html" class="flex items-center text-blue-600 font-bold text-xl">
                <i class="fas fa-graduation-cap mr-2"></i>
                <span>Class-Hub</span>
            </a>
            
            <!-- Desktop Navigation -->
            <nav class="hidden md:flex space-x-6 items-center">
                <a href="logr.html" class="text-gray-700 hover:text-blue-600 transition">Home</a>
                <a href="logr.html" class="text-gray-700 hover:text-blue-600 transition">Lessons</a>
                <a href="logr.html" class="text-gray-700 hover:text-blue-600 transition">Posts</a>
                <a href="logr.html" class="text-gray-700 hover:text-blue-600 transition">About</a>
                <a href="logr.html" class="text-gray-700 hover:text-blue-600 transition">Contact</a>
                
                <!-- User icon (hidden initially) -->
                <div id="user-icon" class="hidden relative ml-4">
                    <button id="user-menu-button" class="w-10 h-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center hover:bg-blue-200 transition">
                        <i class="fas fa-user"></i>
                    </button>
                    <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-10 border border-gray-200">
                        <a href="#" id="logout-btn" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"><i class="fas fa-sign-out-alt mr-2"></i>Logout</a>
                    </div>
                </div>
            </nav>
            
            <!-- Hamburger menu for mobile -->
            <div class="md:hidden flex items-center">
                <!-- User icon for mobile (hidden initially) -->
                <div id="mobile-user-icon" class="hidden relative mr-3">
                    <button id="mobile-user-menu-button" class="w-10 h-10 rounded-full bg-blue-100 text-blue-700 flex items-center justify-center hover:bg-blue-200 transition">
                        <i class="fas fa-user"></i>
                    </button>
                    <div id="mobile-user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-1 z-10 border border-gray-200">
                        <a href="#" id="mobile-logout-btn" class="block px-4 py-2 text-gray-700 hover:bg-gray-100 transition"><i class="fas fa-sign-out-alt mr-2"></i>Logout</a>
                    </div>
                </div>
                
                <button id="mobile-menu-button" class="text-gray-600">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>
        </div>
        
        <!-- Mobile menu (hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t py-2">
            <div class="container mx-auto px-4 flex flex-col space-y-2">
                <a href="logr.html" class="py-2 text-gray-700 hover:text-blue-600 transition">Home</a>
               
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow gradient-bg py-12">
        <div class="container mx-auto px-4">
            <!-- Login Card -->
            <div id="login-container" class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden animate-fade-in">
                <div class="p-8">
                    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">Welcome to Class-Hub</h2>
                    
                    <!-- Initial Login Form -->
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label for="student-id" class="block text-sm font-medium text-gray-700 mb-1">Student ID</label>
                            <div class="relative">
                                <input 
                                    type="text" 
                                    id="student-id" 
                                    name="studentId" 
                                    required 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                    placeholder="Enter your Student ID (e.g., C6123456)"
                                    aria-describedby="student-id-error"
                                >
                                <div id="student-id-error" class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none hidden">
                                    <i class="fas fa-exclamation-circle text-red-500"></i>
                                </div>
                            </div>
                            <p id="student-id-error-message" class="mt-1 text-sm text-red-600 hidden" aria-live="polite"></p>
                        </div>
                        
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                            <div class="relative">
                                <input 
                                    type="email" 
                                    id="email" 
                                    name="email" 
                                    required 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                    placeholder="Enter your email address"
                                    aria-describedby="email-error"
                                >
                                <div id="email-error" class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none hidden">
                                    <i class="fas fa-exclamation-circle text-red-500"></i>
                                </div>
                            </div>
                            <p id="email-error-message" class="mt-1 text-sm text-red-600 hidden" aria-live="polite"></p>
                        </div>
                        
                        <button type="submit" class="w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition">
                            Continue
                        </button>
                    </form>
                    
                    <!-- Name Input Form (hidden initially) -->
                    <div id="name-form-container" class="hidden mt-6 space-y-4">
                        <p class="text-sm text-gray-600">Please provide your full name to complete registration.</p>
                        <form id="name-form" class="space-y-4">
                            <div>
                                <label for="full-name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                                <input 
                                    type="text" 
                                    id="full-name" 
                                    name="fullName" 
                                    required 
                                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition"
                                    placeholder="Enter your full name"
                                >
                            </div>
                            <div class="flex space-x-3">
                                <button type="button" id="cancel-name-btn" class="flex-1 py-2 px-4 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition">
                                    Cancel
                                </button>
                                <button type="submit" class="flex-1 py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition">
                                    Save & Continue
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            
            <!-- Welcome/Dashboard Content (hidden initially) -->
            <div id="dashboard-container" class="hidden max-w-4xl mx-auto bg-white rounded-xl shadow-md overflow-hidden animate-fade-in">
                <div class="p-8">
                    <!-- Welcome Box with user info -->
                    <div class="bg-blue-50 p-6 rounded-lg mb-8 border border-blue-200">
                        <div class="flex items-center">
                            <div class="bg-blue-100 p-3 rounded-full mr-4">
                                <i class="fas fa-user-graduate text-blue-600 text-2xl"></i>
                            </div>
                            <div>
                                <h2 id="welcome-message" class="text-2xl font-bold text-blue-800">Welcome!</h2>
                                <p class="text-blue-600">
                                    <span id="user-full-name" class="font-semibold"></span> 
                                    <span id="user-id-display" class="ml-2 bg-blue-200 px-2 py-1 rounded text-sm"></span>
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-blue-50 p-6 rounded-lg">
                            <h3 class="text-lg font-semibold text-blue-700 mb-3"><i class="fas fa-book mr-2"></i>Latest Lessons</h3>
                            <ul class="space-y-2">
                                <li class="flex items-center">
                                    <i class="fas fa-file-pdf text-red-500 mr-2"></i>
                                    <span>Networking Essentials 1</span>
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-file-pdf text-red-500 mr-2"></i>
                                    <span>Multimedia and Its Application</span>
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-file-pdf text-red-500 mr-2"></i>
                                    <span>JavaScript Basics</span>
                                </li>
                            </ul>
                            <a href="home.html" class="mt-4 inline-block text-blue-600 hover:text-blue-800 text-sm font-medium">
                                View all lessons <i class="fas fa-arrow-right ml-1"></i>

                            </a>
                        </div>
                        
                        <div class="bg-green-50 p-6 rounded-lg">
                            <h3 class="text-lg font-semibold text-green-700 mb-3"><i class="fas fa-bullhorn mr-2"></i>Recent Announcements</h3>
                            <ul class="space-y-2">
                                <li class="flex items-center">
                                    <i class="fas fa-calendar-alt text-green-500 mr-2"></i>
                                    <span>Class time table</span>
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-star text-yellow-500 mr-2"></i>
                                    <span>New assignment posted</span>
                                </li>
                                <li class="flex items-center">
                                    <i class="fas fa-trophy text-purple-500 mr-2"></i>
                                    <span> Doing more work</span>
                                </li>
                            </ul>
                            <a href="home.html" class="mt-4 inline-block text-green-600 hover:text-green-800 text-sm font-medium">
                                See all announcements <i class="fas fa-arrow-right ml-1"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div class="mt-8 bg-gray-50 p-6 rounded-lg">
                        <h3 class="text-lg font-semibold text-gray-700 mb-3"><i class="fas fa-chart-line mr-2"></i>Class Progress</h3>
                        <p class="text-gray-600">Your class is doing great! we are  90% of the students are on time.</p>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mt-3">
                            <div class="bg-blue-600 h-2.5 rounded-full" style="width: 85%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="logr.html" class="text-gray-300 hover:text-white transition">Home</a></li>
                        <li><a href="logr.html" class="text-gray-300 hover:text-white transition">Lessons</a></li>
                        <li><a href="logr.html" class="text-gray-300 hover:text-white transition">Posts</a></li>
                        <li><a href="logr.html" class="text-gray-300 hover:text-white transition">About</a></li>
                        <li><a href="logr.html" class="text-gray-300 hover:text-white transition">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">About the Class</h3>
                    <p class="text-gray-300">
                        CNS242 is a unified, creative class that focuses on the all-round development of its students.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact Information</h3>
                    <p class="text-gray-300">Email: cns242elearning@gmail.com</p>
                    <p class="text-gray-300">WhatsApp: +252617392380</p>
                    <div class="flex mt-3 space-x-4">
                        <a href="https://wa.me/252617392380" target="_blank" class="text-gray-300 hover:text-white transition">
                            <i class="fab fa-whatsapp text-xl"></i>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2025 Class-Hub. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
    // Constants for localStorage keys
    const USERS_KEY = 'cns242_users';
    const CURRENT_USER_KEY = 'cns242_current';
    
    // DOM Elements
    const loginForm = document.getElementById('login-form');
    const nameForm = document.getElementById('name-form');
    const nameFormContainer = document.getElementById('name-form-container');
    const loginContainer = document.getElementById('login-container');
    const dashboardContainer = document.getElementById('dashboard-container');
    const welcomeMessage = document.getElementById('welcome-message');
    const userFullName = document.getElementById('user-full-name');
    const userIdDisplay = document.getElementById('user-id-display');
    const userIcon = document.getElementById('user-icon');
    const mobileUserIcon = document.getElementById('mobile-user-icon');
    const userMenuButton = document.getElementById('user-menu-button');
    const userDropdown = document.getElementById('user-dropdown');
    const mobileUserMenuButton = document.getElementById('mobile-user-menu-button');
    const mobileUserDropdown = document.getElementById('mobile-user-dropdown');
    const logoutBtn = document.getElementById('logout-btn');
    const mobileLogoutBtn = document.getElementById('mobile-logout-btn');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const toast = document.getElementById('toast');
    const toastMessage = document.getElementById('toast-message');
    
    let pendingUser = null; // Temporary storage for registration
    
    document.addEventListener('DOMContentLoaded', function() {
        const currentUser = getCurrentUser();
        if (currentUser) showDashboard(currentUser);
        setupEventListeners();
    });
    
    function setupEventListeners() {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            handleLogin();
        });
        nameForm.addEventListener('submit', function(e) {
            e.preventDefault();
            handleNameSubmit();
        });
        document.getElementById('cancel-name-btn').addEventListener('click', hideNameForm);
        
        if (userMenuButton) {
            userMenuButton.addEventListener('click', e => {
                e.stopPropagation();
                userDropdown.classList.toggle('hidden');
            });
        }
        if (mobileUserMenuButton) {
            mobileUserMenuButton.addEventListener('click', e => {
                e.stopPropagation();
                mobileUserDropdown.classList.toggle('hidden');
            });
        }
        if (logoutBtn) logoutBtn.addEventListener('click', e => { e.preventDefault(); e.stopPropagation(); handleLogout(); });
        if (mobileLogoutBtn) mobileLogoutBtn.addEventListener('click', e => { e.preventDefault(); e.stopPropagation(); handleLogout(); });
        
        if (mobileMenuButton) {
            mobileMenuButton.addEventListener('click', e => {
                e.stopPropagation();
                mobileMenu.classList.toggle('hidden');
                mobileMenu.classList.toggle('mobile-menu');
            });
        }
        
        document.addEventListener('click', function(e) {
            if (userDropdown && !userIcon.contains(e.target)) userDropdown.classList.add('hidden');
            if (mobileUserDropdown && !mobileUserIcon.contains(e.target)) mobileUserDropdown.classList.add('hidden');
            if (mobileMenu && !mobileMenuButton.contains(e.target)) mobileMenu.classList.add('hidden');
        });
        
        document.getElementById('student-id').addEventListener('blur', validateStudentId);
        document.getElementById('email').addEventListener('blur', validateEmail);
    }
    
    function handleLogin() {
        const studentId = document.getElementById('student-id').value.trim();
        const email = document.getElementById('email').value.trim();
        if (!validateStudentId() || !validateEmail()) return;
        const users = getUsers();
        const existingUser = users.find(user => user.email.toLowerCase() === email.toLowerCase());
        if (existingUser) {
            if (existingUser.id.toUpperCase() === studentId.toUpperCase()) {
                loginUser(existingUser);
                showToast('Welcome, ' + existingUser.name + '!');
            } else showError('email', 'This email has already been used.');
        } else {
            pendingUser = { id: studentId, email: email };
            showNameForm();
        }
    }
    
    function handleNameSubmit() {
        const fullName = document.getElementById('full-name').value.trim();
        if (!fullName) return document.getElementById('full-name').classList.add('border-red-500');
        pendingUser.name = fullName;
        registerUser(pendingUser);
        loginUser(pendingUser);
        showToast('Welcome, ' + fullName + '!');
        pendingUser = null;
    }
    
    function validateStudentId() {
        const studentIdInput = document.getElementById('student-id');
        const studentId = studentIdInput.value.trim();
        const isValid = /^(C6|c6)[a-zA-Z0-9]{6,7}$/i.test(studentId);
        if (!isValid && studentId) showError('student-id', 'Please enter a valid Student ID (C6xxxxxx).');
        else clearError('student-id');
        return isValid;
    }
    
    function validateEmail() {
        const emailInput = document.getElementById('email');
        const email = emailInput.value.trim();
        const isValid = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        if (!isValid && email) showError('email', 'Please enter a valid email.');
        else clearError('email');
        return isValid;
    }
    
    function showError(fieldId, message) {
        const errorIcon = document.getElementById(fieldId + '-error');
        const errorMessage = document.getElementById(fieldId + '-error-message');
        errorIcon.classList.remove('hidden');
        errorMessage.textContent = message;
        errorMessage.classList.remove('hidden');
        document.getElementById(fieldId).classList.add('border-red-500');
    }
    
    function clearError(fieldId) {
        const errorIcon = document.getElementById(fieldId + '-error');
        const errorMessage = document.getElementById(fieldId + '-error-message');
        errorIcon.classList.add('hidden');
        errorMessage.classList.add('hidden');
        document.getElementById(fieldId).classList.remove('border-red-500');
    }
    
    function showNameForm() { nameFormContainer.classList.remove('hidden'); nameFormContainer.classList.add('animate-fade-in'); }
    function hideNameForm() { nameFormContainer.classList.add('hidden'); pendingUser = null; }
    
    function registerUser(user) { const users = getUsers(); users.push(user); localStorage.setItem(USERS_KEY, JSON.stringify(users)); }
    function loginUser(user) { localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(user)); showDashboard(user); }
    
    function handleLogout() { localStorage.removeItem(CURRENT_USER_KEY); if(userDropdown) userDropdown.classList.add('hidden'); if(mobileUserDropdown) mobileUserDropdown.classList.add('hidden'); showLoginForm(); showToast('You have been logged out successfully.'); }
    
    function showDashboard(user) { welcomeMessage.textContent = `Welcome, ${user.name}!`; userFullName.textContent = user.name; userIdDisplay.textContent = user.id; userIcon.classList.remove('hidden'); mobileUserIcon.classList.remove('hidden'); loginContainer.classList.add('hidden'); dashboardContainer.classList.remove('hidden'); }
    
    function showLoginForm() { userIcon.classList.add('hidden'); mobileUserIcon.classList.add('hidden'); dashboardContainer.classList.add('hidden'); loginContainer.classList.remove('hidden'); loginForm.reset(); nameForm.reset(); hideNameForm(); clearError('student-id'); clearError('email'); }
    
    function showToast(message) { toastMessage.textContent = message; toast.classList.add('show'); setTimeout(() => { toast.classList.remove('show'); }, 3000); }
    
    function getUsers() { const usersJSON = localStorage.getItem(USERS_KEY); return usersJSON ? JSON.parse(usersJSON) : []; }
    function getCurrentUser() { const userJSON = localStorage.getItem(CURRENT_USER_KEY); return userJSON ? JSON.parse(userJSON) : null; }
</script>

</body>
</html>
